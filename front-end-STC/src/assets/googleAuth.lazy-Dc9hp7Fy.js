import{r as o,u as d,j as e,c as p}from"./index-BXzBXnnT.js";import{a as n}from"./axios-CCb-kr4I.js";function h(){const[a,r]=o.useState(""),[x,l]=o.useState(!1);o.useState(!1);const[m,c]=o.useState(""),i=d(),u=async()=>{try{const t=await n.post("http://localhost:8080/api/cloud/validate-token",{token:a});if(t.status===200){console.log("Token validation response:",t.data),localStorage.setItem("accessToken",a);const s=(await n.get("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${a}`}})).data.email;console.log("Correo del usuario:",s),localStorage.setItem("userEmail",s),c(s),l(!0),await n.post("http://localhost:8080/api/cloud/save-projects",{token:a}),i({to:"/homegcp"})}}catch(t){console.error("Full error details:",t),alert("Error en la autenticación. Revisa la consola para más detalles.")}};return e.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:e.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-8 text-center space-y-4",children:[e.jsx("h1",{className:"text-xl font-bold",children:"HOLASAJDLKSLDASJLDLKSJD"}),e.jsx("input",{type:"text",value:a,onChange:t=>r(t.target.value),className:"w-full px-3 py-2 border rounded",placeholder:"Pega aquí tu token"}),e.jsx("button",{onClick:u,className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600",children:"Validar Token"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Ejecuta los siguientes comandos en tu terminal para obtener el token:",e.jsx("br",{}),e.jsx("code",{children:"gcloud auth login"})," para seleccionar la cuenta.",e.jsx("br",{}),"Luego, ejecuta ",e.jsx("code",{children:"gcloud auth print-access-token"})," para obtener el token."]})]})})}function g(){return e.jsx("div",{children:e.jsx(h,{})})}const k=p("/googleAuth")({component:g});export{k as Route};
